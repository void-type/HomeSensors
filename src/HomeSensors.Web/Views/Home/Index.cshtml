@model IEnumerable<HomeSensors.Web.Controllers.HomeController.TemperatureData>

@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Temps</h1>
</div>

<div id="lineChart"></div>

@section Styles {
<link rel="stylesheet" href="~/lib/billboard/billboard.css">
}

@section Scripts {
<script src="~/lib/billboard/d3.js"></script>
<script src="~/lib/billboard/billboard.js"></script>


<script>
    const modelData = @Json.Serialize(Model);

    console.log(modelData);

    const columns = modelData
        .map(md => [md.label, ...md.values]);

    @* var chart = bb.generate({
        data: {
            columns: columns,
            type: "line",
        },
        bindto: "#lineChart"
    }); *@

    var chart = bb.generate({
        data: {
            x: "x",
            xFormat: '%Y-%m-%d %H:%M:%S',
            columns: [
                ["x", "2013-01-01 22:05:00", "2013-01-02 23:12:00", "2013-01-03 12:23:34", "2013-01-04 07:15:32", "2013-01-05 02:02:03", "2013-01-06 05:05:05"],
                ["data1", 30, 200, null, 400, 150, 250],
                ["data2", 130, 340, 200, 500, 250, 350]
                // {{ date | safe}},
                // {{value | safe}}
            ],
            type: "line", // for ESM specify as: line()
        },
        axis: {
            x: {
                type: "timeseries",
                tick: {
                    format: "%Y-%m-%d %H:%M:%S"
                }
            }
        },
        line: {
            connectNull: true
        },
        bindto: "#lineChart"
    });
</script>
}
